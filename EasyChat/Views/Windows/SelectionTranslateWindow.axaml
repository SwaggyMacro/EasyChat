<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:suki="https://github.com/kikipoulet/SukiUI"
        xmlns:icons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
        xmlns:lang="using:EasyChat.Lang"
        mc:Ignorable="d" d:DesignWidth="450" d:DesignHeight="350"
        x:Class="EasyChat.Views.Windows.SelectionTranslateWindow"
        Width="450" MinHeight="200" MaxHeight="500"
        SystemDecorations="None"
        TransparencyLevelHint="AcrylicBlur"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        CanResize="True"
        ShowActivated="False"
        WindowStartupLocation="Manual"
        SizeToContent="Height">
    
    <Panel Margin="5">
        <suki:GlassCard Padding="0" CornerRadius="8">
            <Grid RowDefinitions="Auto,*,Auto,Auto">
                
                <!-- Header - Draggable -->
                <Border Grid.Row="0" Background="{DynamicResource SukiCardBackground}" 
                        CornerRadius="8,8,0,0" Padding="12,10"
                        PointerPressed="OnHeaderPointerPressed">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <icons:MaterialIcon Kind="Translate" Width="20" Height="20" 
                                                Foreground="{DynamicResource SukiPrimaryColor}"/>
                            <TextBlock Text="{x:Static lang:Resources.SelectionTranslate_Title}" FontWeight="SemiBold" FontSize="14"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <Button Grid.Column="2" Click="OnCloseClick" 
                                Classes="Flat" Padding="4" Width="28" Height="28">
                            <icons:MaterialIcon Kind="Close" Width="16" Height="16"/>
                        </Button>
                    </Grid>
                </Border>
                
                <!-- Source Text Section -->
                <Grid Grid.Row="1" RowDefinitions="Auto,*" Margin="12,8,12,4">
                    <TextBlock Text="{x:Static lang:Resources.SelectionTranslate_SourceLabel}" FontSize="12" Foreground="{DynamicResource SukiLowText}" 
                               Margin="0,0,0,4"/>
                    <Border Grid.Row="1" CornerRadius="6" 
                            Background="{DynamicResource SukiCardBackground}" 
                            BorderBrush="{DynamicResource SukiControlBorderBrush}" 
                            BorderThickness="1" MinHeight="60" MaxHeight="120">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <SelectableTextBlock x:Name="SourceTextBlock" 
                                                 TextWrapping="Wrap" 
                                                 Padding="8"
                                                 FontSize="13"
                                                 Foreground="{DynamicResource SukiText}"/>
                        </ScrollViewer>
                    </Border>
                </Grid>
                
                <!-- Translation Result Section -->
                <Grid Grid.Row="2" RowDefinitions="Auto,*" Margin="12,4,12,8">
                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,0,4">
                        <TextBlock Text="{x:Static lang:Resources.SelectionTranslate_ResultLabel}" FontSize="12" Foreground="{DynamicResource SukiLowText}"/>
                        <suki:Loading x:Name="LoadingIndicator" Width="14" Height="14" IsVisible="False"/>
                    </StackPanel>
                    <Border Grid.Row="1" CornerRadius="6" 
                            Background="{DynamicResource SukiCardBackground}" 
                            BorderBrush="{DynamicResource SukiControlBorderBrush}" 
                            BorderThickness="1" MinHeight="60" MaxHeight="150">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <SelectableTextBlock x:Name="ResultTextBlock" 
                                                 TextWrapping="Wrap"
                                                 Padding="8"
                                                 FontSize="13"
                                                 Foreground="{DynamicResource SukiText}"/>
                        </ScrollViewer>
                    </Border>
                </Grid>
                
                <!-- Footer Actions -->
                <Border Grid.Row="3" Background="{DynamicResource SukiCardBackground}" 
                        CornerRadius="0,0,8,8" Padding="12,8">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <!-- Language selector can be added here later -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="4">
                            <TextBlock Text="{x:Static lang:Resources.SelectionTranslate_AutoDetect}" FontSize="11" 
                                       Foreground="{DynamicResource SukiLowText}"
                                       VerticalAlignment="Center"/>
                            <icons:MaterialIcon Kind="ArrowRight" Width="14" Height="14" 
                                                Foreground="{DynamicResource SukiLowText}"/>
                            <TextBlock Text="{x:Static lang:Resources.SelectionTranslate_Language_Chinese}" FontSize="11" 
                                       Foreground="{DynamicResource SukiLowText}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                            <Button x:Name="CopyButton" Click="OnCopyClick" 
                                    ToolTip.Tip="{x:Static lang:Resources.SelectionTranslate_CopyTooltip}" Classes="Flat" 
                                    Padding="6" Width="32" Height="32">
                                <icons:MaterialIcon Kind="ContentCopy" Width="16" Height="16"/>
                            </Button>
                            <Button x:Name="TranslateButton" Click="OnTranslateClick" 
                                    Classes="Flat Accent" Padding="12,6">
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <icons:MaterialIcon Kind="Translate" Width="16" Height="16"/>
                                    <TextBlock Text="{x:Static lang:Resources.SelectionTranslate_TranslateButton}" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </suki:GlassCard>
    </Panel>
</Window>
